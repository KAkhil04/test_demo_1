
<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>
    <!-- Font cache directory list -->
    <cachedir>/usr/lib/fontconfig/cache</cachedir>
    <cachedir>/tmp/fontconfig-cache</cachedir>
    <!-- Remove or comment out the read-only cache directory -->
    <!-- <cachedir>~/.fontconfig</cachedir> -->
    <config>
        <!-- Add any additional configuration here if needed -->
    </config>
</fontconfig>



\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

oc get deployments -A -o custom-columns='NAME:.metadata.name,NAMESPACE:.metadata.namespace,SAToken:.spec.template.spec.automountServiceAccountToken' | grep -i -v 'false' > deployments_to_update.txt

#!/bin/bash
while read -r line; do
    NAME=$(echo "$line" | awk '{print $1}')
    NAMESPACE=$(echo "$line" | awk '{print $2}')
    echo "Patching deployment $NAME in namespace $NAMESPACE"
    oc patch deployment "$NAME" -n "$NAMESPACE" --type='merge' -p '{"spec":{"template":{"spec":{"automountServiceAccountToken":false}}}}'
done < deployments_to_update.txt

oc get deployments -A -o custom-columns='NAME:.metadata.name,NAMESPACE:.metadata.namespace,SAToken:.spec.template.spec.automountServiceAccountToken' | grep -i -v 'false'