oc get pods -n <namespace> -o json | jq '.items[] | {name: .metadata.name, limits: .spec.containers[].resources.limits.memory, requests: .spec.containers[].resources.requests.memory, actual_usage: .status.containerStatuses[].usage.memory}'

#!/bin/bash

# Set namespace
NAMESPACE="<namespace>" # Replace <namespace> with your namespace

# Get pod, container, requests, and limits
REQUESTS_LIMITS=$(oc get pods -n $NAMESPACE -o json | jq -r '.items[] |
  .spec.containers[] as $container |
  {podName: .metadata.name, containerName: $container.name, requests: $container.resources.requests.memory, limits: $container.resources.limits.memory} |
  [.podName, .containerName, .requests, .limits] | @tsv')

# Get actual usage
USAGE=$(oc adm top pods -n $NAMESPACE --containers | tail -n +2 | awk '{print $1 "\t" $2 "\t" $5}')

# Prepare output
echo -e "POD_NAME\tCONTAINER_NAME\tREQUEST_MEMORY\tLIMIT_MEMORY\tUSAGE_MEMORY"
awk 'NR==FNR{a[$1,$2]=$3; next} {print $1, $2, $3, $4, a[$1,$2]}' \
  <(echo "$USAGE") <(echo "$REQUESTS_LIMITS") | column -t