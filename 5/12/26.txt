apiVersion: v1
kind: ConfigMap
metadata:
  name: fontconfig-config
data:
  fonts.conf: |
    <?xml version="1.0"?>
    <!DOCTYPE fontconfig SYSTEM "fonts.dtd">
    <fontconfig>
        <!-- Font cache directory list -->
        <cachedir>/tmp/fontconfig-cache</cachedir>
        <cachedir>/usr/lib/fontconfig/cache</cachedir>
        <cachedir prefix="xdg">fontconfig</cachedir>
        <!-- Comment out or remove problematic cache directory -->
        <!-- <cachedir>~/.fontconfig</cachedir> -->
        <config>
        </config>
    </fontconfig>

apiVersion: apps/v1
kind: Deployment
metadata:
  name: your-app
spec:
  template:
    spec:
      containers:
      - name: your-container
        image: your-image:tag
        command: ["/bin/sh", "-c"]
        args:
          - |
            mkdir -p /tmp/fontconfig-cache &&
            chmod 777 /tmp/fontconfig-cache &&
            cp /fontconfig-config/fonts.conf /tmp/fonts.conf &&
            export FONTCONFIG_FILE=/tmp/fonts.conf &&
            export FONTCONFIG_PATH=/tmp &&
            exec your-original-command
        volumeMounts:
        - name: fontconfig-config
          mountPath: /fontconfig-config
        - name: fontconfig-cache
          mountPath: /tmp/fontconfig-cache
      volumes:
      - name: fontconfig-config
        configMap:
          name: fontconfig-config
      - name: fontconfig-cache
        emptyDir: {}
